<div class="home-container">
  <!-- Hero Section -->
  <header class="hero animate-fadeIn">
    <h1 class="hero-title">
      <span class="text-gradient">{{ 'home.title' | translate }}</span>
    </h1>
    <p class="hero-subtitle">{{ 'home.subtitle' | translate }}</p>
  </header>

  <div class="content-grid">
    <!-- Form Section -->
    <section class="form-section glass-card animate-fadeIn" [style.animation-delay]="'0.1s'">
      <div class="section-header">
        <h2 class="section-title">
          <span class="section-icon">âœï¸</span>
          {{ showForm ? ('home.itemNumber' | translate: {number: formCounter}) : ('home.addItem' | translate) }}
        </h2>
      </div>

      <!-- Add Item Form -->
      <div *ngIf="showForm" class="form-content" [@.disabled]="true">
        <form [formGroup]="form">
          <ng-container formArrayName="sepet">
            <div *ngFor="let itemForm of sepet.controls; let i = index" class="item-form" [formGroupName]="i"
              [style.animation-delay]="i * 0.1 + 's'">

              <div class="item-number">{{ i + 1 }}</div>

              <div class="form-fields">
                <mat-form-field appearance="fill" class="form-field">
                  <mat-label>{{ 'home.itemName' | translate }}</mat-label>
                  <input matInput formControlName="isim" [placeholder]="'home.itemNamePlaceholder' | translate">
                  <mat-error *ngIf="sepet.controls[i].get('isim')?.invalid">
                    {{ getErrorMessage(i, 'isim') }}
                  </mat-error>
                </mat-form-field>

                <mat-form-field appearance="fill" class="form-field quantity-field">
                  <mat-label>{{ 'home.quantity' | translate }}</mat-label>
                  <input matInput type="number" formControlName="adet" min="1"
                    [placeholder]="'home.quantityPlaceholder' | translate">
                  <mat-error *ngIf="sepet.controls[i].get('adet')?.invalid">
                    {{ getErrorMessage(i, 'adet') }}
                  </mat-error>
                </mat-form-field>
              </div>
            </div>
          </ng-container>
        </form>

        <div class="form-actions">
          <button class="btn btn-primary" (click)="saveItems()" [disabled]="form.controls.sepet.invalid">
            <span>ğŸ’¾</span> {{ 'home.save' | translate }}
          </button>
          <button class="btn btn-secondary" (click)="clearForm()">
            <span>âœ–ï¸</span> {{ 'home.cancel' | translate }}
          </button>
        </div>
      </div>

      <!-- Action Buttons -->
      <div class="action-buttons">
        <button class="btn btn-primary add-btn" (click)="addItem()">
          <span class="btn-icon-large">â•</span>
          {{ 'home.addItem' | translate }}
        </button>

        <button *ngIf="listArray.length > 0" class="btn btn-danger" (click)="deleteAll()">
          <span>ğŸ—‘ï¸</span> {{ 'home.deleteAll' | translate }}
        </button>
      </div>
    </section>

    <!-- List Section -->
    <section class="list-section glass-card animate-fadeIn" [style.animation-delay]="'0.2s'">
      <div class="section-header">
        <h2 class="section-title">
          <span class="section-icon">ğŸ“‹</span>
          {{ 'home.title' | translate }}
          <span class="item-count" *ngIf="listArray.length > 0">({{ listArray.length }})</span>
        </h2>
      </div>

      <!-- Empty State -->
      <div *ngIf="listArray.length === 0" class="empty-state">
        <div class="empty-icon">ğŸ›’</div>
        <h3>{{ 'home.emptyList' | translate }}</h3>
        <p>{{ 'home.emptyListDesc' | translate }}</p>
      </div>

      <!-- Items Table -->
      <div *ngIf="listArray.length > 0" class="table-container">
        <table mat-table [dataSource]="listArray" class="items-table">
          <!-- No. Column -->
          <ng-container matColumnDef="id">
            <th mat-header-cell *matHeaderCellDef>{{ 'home.table.no' | translate }}</th>
            <td mat-cell *matCellDef="let element">
              <span class="item-id">{{ element.id }}</span>
            </td>
          </ng-container>

          <!-- Name Column -->
          <ng-container matColumnDef="name">
            <th mat-header-cell *matHeaderCellDef>{{ 'home.table.name' | translate }}</th>
            <td mat-cell *matCellDef="let element">
              <span class="item-name">{{ element.isim }}</span>
            </td>
          </ng-container>

          <!-- Quantity Column -->
          <ng-container matColumnDef="count">
            <th mat-header-cell *matHeaderCellDef>{{ 'home.table.quantity' | translate }}</th>
            <td mat-cell *matCellDef="let element">
              <span class="item-quantity">{{ element.adet }}</span>
            </td>
          </ng-container>

          <!-- Delete Column -->
          <ng-container matColumnDef="delete">
            <th mat-header-cell *matHeaderCellDef>{{ 'home.table.actions' | translate }}</th>
            <td mat-cell *matCellDef="let element">
              <button class="delete-btn" (click)="deleteItem(element.id)" [attr.aria-label]="'home.delete' | translate">
                ğŸ—‘ï¸
              </button>
            </td>
          </ng-container>

          <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumns;" class="table-row"></tr>
        </table>
      </div>
    </section>
  </div>
</div>